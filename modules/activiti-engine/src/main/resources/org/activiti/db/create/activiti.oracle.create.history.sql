-- *********************************************************************
-- Update Database Script
-- *********************************************************************
-- Change Log: liquibase/activiti-history-master.xml
-- Ran at: 2/7/13 4:46 PM
-- Against: ACTIVITIDB@jdbc:oracle:thin:@localhost:1521:xe
-- Liquibase version: 2.0.3
-- *********************************************************************

-- Lock Database
-- Changeset liquibase/activiti-history-5.7.xml::13 ACT_HI_PROCINST::trademakers::(Checksum: 3:ffa26c36487be2674fbae36a716fb4aa)
CREATE TABLE ACT_HI_PROCINST (ID_ NVARCHAR2(64) NOT NULL, PROC_INST_ID_ NVARCHAR2(64) NOT NULL, BUSINESS_KEY_ NVARCHAR2(255), PROC_DEF_ID_ NVARCHAR2(64) NOT NULL, START_TIME_ TIMESTAMP(6) NOT NULL, END_TIME_ TIMESTAMP(6), DURATION_ NUMBER(19), START_USER_ID_ NVARCHAR2(255), START_ACT_ID_ NVARCHAR2(255), END_ACT_ID_ NVARCHAR2(255), SUPER_PROCESS_INSTANCE_ID_ NVARCHAR2(64), CONSTRAINT PK_ACT_HI_PROCINST PRIMARY KEY (ID_));


-- Changeset liquibase/activiti-history-5.7.xml::13.1 UK_ACT_HI_PROCINST::trademakers::(Checksum: 3:7a5de961b84c19234bba6eca127b4625)
ALTER TABLE ACT_HI_PROCINST ADD CONSTRAINT UK_ACT_HI_PROCINST UNIQUE (PROC_INST_ID_);


-- Changeset liquibase/activiti-history-5.7.xml::13.2.2 ACT_UNIQ_HI_BUS_KEY::trademakers::(Checksum: 3:477f8ef75e72853f82728d65ba2a1de8)
-- Changeset liquibase/activiti-history-5.7.xml::13.2.3 ACT_UNIQ_HI_BUS_KEY Oracle::trademakers::(Checksum: 3:81cdb11fca01b9ce3a9fcc5c29a71b25)
create unique index ACT_UNIQ_HI_BUS_KEY on ACT_HI_PROCINST (case when BUSINESS_KEY_ is null then null else PROC_DEF_ID_ end, case when BUSINESS_KEY_ is null then null else BUSINESS_KEY_ end);


-- Changeset liquibase/activiti-history-5.7.xml::14 ACT_HI_ACTINST::trademakers::(Checksum: 3:1fb763bd09c394182036114e5a70b9e2)
CREATE TABLE ACT_HI_ACTINST (ID_ NVARCHAR2(64) NOT NULL, PROC_DEF_ID_ NVARCHAR2(64) NOT NULL, PROC_INST_ID_ NVARCHAR2(64) NOT NULL, EXECUTION_ID_ NVARCHAR2(64) NOT NULL, ACT_ID_ NVARCHAR2(255) NOT NULL, ACT_NAME_ NVARCHAR2(255), ACT_TYPE_ NVARCHAR2(255) NOT NULL, ASSIGNEE_ NVARCHAR2(64), START_TIME_ TIMESTAMP(6) NOT NULL, END_TIME_ TIMESTAMP(6), DURATION_ NUMBER(19), CONSTRAINT PK_ACT_HI_ACTINST PRIMARY KEY (ID_));


-- Changeset liquibase/activiti-history-5.7.xml::15 ACT_HI_DETAIL::trademakers::(Checksum: 3:7bdb9517d181930141272c32d2b2bc69)
CREATE TABLE ACT_HI_DETAIL (ID_ NVARCHAR2(64) NOT NULL, TYPE_ NVARCHAR2(255) NOT NULL, PROC_INST_ID_ NVARCHAR2(64), TASK_ID_ NVARCHAR2(64), EXECUTION_ID_ NVARCHAR2(64), ACT_INST_ID_ NVARCHAR2(64), NAME_ NVARCHAR2(255) NOT NULL, VAR_TYPE_ NVARCHAR2(255), REV_ NUMBER(10), TIME_ TIMESTAMP(6) NOT NULL, BYTEARRAY_ID_ NVARCHAR2(64), DOUBLE_ BINARY_DOUBLE, LONG_ NUMBER(19), TEXT_ NVARCHAR2(2000), TEXT2_ NVARCHAR2(2000), CONSTRAINT PK_ACT_HI_DETAIL PRIMARY KEY (ID_));


-- Changeset liquibase/activiti-history-5.7.xml::16 Activiti 5.1 Update ACT_HI_TASKINST::trademakers::(Checksum: 3:1cd88f05139a9f4d4082675e004e43ae)
CREATE TABLE ACT_HI_TASKINST (ID_ NVARCHAR2(64) NOT NULL, PROC_DEF_ID_ NVARCHAR2(64), TASK_DEF_KEY_ NVARCHAR2(255), PROC_INST_ID_ NVARCHAR2(64), EXECUTION_ID_ NVARCHAR2(64), NAME_ NVARCHAR2(255), DESCRIPTION_ NVARCHAR2(2000), ASSIGNEE_ NVARCHAR2(64), START_TIME_ TIMESTAMP(6) NOT NULL, END_TIME_ TIMESTAMP(6), DURATION_ NUMBER(19), DELETE_REASON_ NVARCHAR2(2000), PRIORITY_ NUMBER(10), DUE_DATE_ TIMESTAMP(6), OWNER_ NVARCHAR2(64), PARENT_TASK_ID_ NVARCHAR2(64), CONSTRAINT PK_ACT_HI_TASKINST PRIMARY KEY (ID_));


-- Changeset liquibase/activiti-history-5.7.xml::17 Activiti 5.4 Create ACT_HI_COMMENT::trademakers::(Checksum: 3:ef09429f6b3ff0e664395cfdcaa7eb12)
CREATE TABLE ACT_HI_COMMENT (ID_ NVARCHAR2(64) NOT NULL, TIME_ TIMESTAMP(6) NOT NULL, USER_ID_ NVARCHAR2(255), TASK_ID_ NVARCHAR2(64), PROC_INST_ID_ NVARCHAR2(64), MESSAGE_ NVARCHAR2(2000), TYPE_ NVARCHAR2(255), ACTION_ NVARCHAR2(255), FULL_MSG_ BLOB, CONSTRAINT PK_ACT_HI_COMMENT PRIMARY KEY (ID_));


-- Changeset liquibase/activiti-history-5.7.xml::18 Activiti 5.4 Create ACT_HI_ATTACHMENT::trademakers::(Checksum: 3:2b9395f6497b3804d2facea4536168a9)
CREATE TABLE ACT_HI_ATTACHMENT (ID_ NVARCHAR2(64) NOT NULL, REV_ NUMBER(10), USER_ID_ NVARCHAR2(255), NAME_ NVARCHAR2(255), DESCRIPTION_ NVARCHAR2(2000), TYPE_ NVARCHAR2(255), TASK_ID_ NVARCHAR2(64), PROC_INST_ID_ NVARCHAR2(64), URL_ NVARCHAR2(2000), CONTENT_ID_ NVARCHAR2(64), CONSTRAINT PK_ACT_HI_ATTACHMENT PRIMARY KEY (ID_));


-- Changeset liquibase/activiti-history-5.7.xml::25 ACT_IDX_HI_PRO_INST_END::trademakers::(Checksum: 3:682c05c7c07325608625382a0bc48408)
CREATE INDEX ACT_IDX_HI_PRO_INST_END ON ACT_HI_PROCINST(END_TIME_);


-- Changeset liquibase/activiti-history-5.7.xml::26 ACT_IDX_HI_PRO_I_BUSKEY::trademakers::(Checksum: 3:d75ff4683f8a81d16012d80fea8dae27)
CREATE INDEX ACT_IDX_HI_PRO_I_BUSKEY ON ACT_HI_PROCINST(BUSINESS_KEY_);


-- Changeset liquibase/activiti-history-5.7.xml::27 ACT_IDX_HI_ACT_INST_START::trademakers::(Checksum: 3:a669421332d6638fb16213c6723cd3cb)
CREATE INDEX ACT_IDX_HI_ACT_INST_START ON ACT_HI_ACTINST(START_TIME_);


-- Changeset liquibase/activiti-history-5.7.xml::28 ACT_IDX_HI_ACT_INST_END::trademakers::(Checksum: 3:431543ec3a95f263a91adec6e84729e0)
CREATE INDEX ACT_IDX_HI_ACT_INST_END ON ACT_HI_ACTINST(END_TIME_);


-- Changeset liquibase/activiti-history-5.7.xml::29 ACT_IDX_HI_DETAIL_PROC_INST::trademakers::(Checksum: 3:f3eb53ae07ceb08c8d0066d00be26a4f)
CREATE INDEX ACT_IDX_HI_DETAIL_PROC_INST ON ACT_HI_DETAIL(PROC_INST_ID_);


-- Changeset liquibase/activiti-history-5.7.xml::30 ACT_IDX_HI_DETAIL_ACT_INST::trademakers::(Checksum: 3:bc91b120e7eaefd127f006c4f7b4edbf)
CREATE INDEX ACT_IDX_HI_DETAIL_ACT_INST ON ACT_HI_DETAIL(ACT_INST_ID_);


-- Changeset liquibase/activiti-history-5.7.xml::31 ACT_IDX_HI_DETAIL_TIME::trademakers::(Checksum: 3:2bdae734eb1e90701cdda40af696e68a)
CREATE INDEX ACT_IDX_HI_DETAIL_TIME ON ACT_HI_DETAIL(TIME_);


-- Changeset liquibase/activiti-history-5.7.xml::32 ACT_IDX_HI_DETAIL_NAME::trademakers::(Checksum: 3:0ffce2cda8e6629337f21afe03da7542)
CREATE INDEX ACT_IDX_HI_DETAIL_NAME ON ACT_HI_DETAIL(NAME_);


-- Changeset liquibase/activiti-history-5.9.xml::14 ACT_HI_PROCINST.DELETE_REASON_::trademakers::(Checksum: 3:54ad2c1dc9cb02bfb52a66cfc1c66aa3)
ALTER TABLE ACT_HI_PROCINST ADD DELETE_REASON_ VARCHAR2(4000);


-- Changeset liquibase/activiti-history-5.10.xml::9 ACT_IDX_HI_DETAIL_TASK_ID::trademakers::(Checksum: 3:97a0cbf45f348b4f4736dd3ed07bd098)
CREATE INDEX ACT_IDX_HI_DETAIL_TASK_ID ON ACT_HI_DETAIL(TASK_ID_);


-- Changeset liquibase/activiti-history-5.11.xml::9 Activiti 5.11 Update ACT_HI_ACTINST::trademakers::(Checksum: 3:8970a107e1f9caba608b4077cc7ad65d)
ALTER TABLE ACT_HI_ACTINST ADD TASK_ID_ NVARCHAR2(64);

ALTER TABLE ACT_HI_ACTINST ADD CALL_PROC_INST_ID_ NVARCHAR2(64);


-- Changeset liquibase/activiti-history-5.11.xml::9.1 Activiti 5.11 Create Index on ACT_HI_ACTINST::trademakers::(Checksum: 3:d00c20e5802342aaa5a251692bb312d1)
CREATE INDEX ACT_IDX_HI_ACT_INST_PROCINST ON ACT_HI_ACTINST(PROC_INST_ID_, ACT_ID_);


-- Changeset liquibase/activiti-history-5.11.xml::10 Activiti 5.11 Update ACT_HI_TASKINST::trademakers::(Checksum: 3:5310733ba3499bcbe6bb37cbd07f2a51)
ALTER TABLE ACT_HI_TASKINST MODIFY OWNER_ NVARCHAR2(255);

ALTER TABLE ACT_HI_TASKINST MODIFY ASSIGNEE_ NVARCHAR2(255);


-- Changeset liquibase/activiti-history-5.11.xml::11 Activiti 5.11 Create Table ACT_HI_VARINST::trademakers::(Checksum: 3:73d4b4b51ac50ffd429865ed05d9b295)
CREATE TABLE ACT_HI_VARINST (ID_ NVARCHAR2(64) NOT NULL, PROC_INST_ID_ NVARCHAR2(64), EXECUTION_ID_ NVARCHAR2(64), TASK_ID_ NVARCHAR2(64), NAME_ NVARCHAR2(255) NOT NULL, VAR_TYPE_ NVARCHAR2(100), REV_ NUMBER(10), BYTEARRAY_ID_ NVARCHAR2(64), DOUBLE_ BINARY_DOUBLE, LONG_ NUMBER(19), TEXT_ NVARCHAR2(2000), TEXT2_ NVARCHAR2(2000), CONSTRAINT PK_ACT_HI_VARINST PRIMARY KEY (ID_, NAME_));


-- Changeset liquibase/activiti-history-5.11.xml::11.1 Activiti 5.11 Create Index on ACT_HI_VARINST::trademakers::(Checksum: 3:8e38f0f467738b465f82b24e5ffd6c84)
CREATE INDEX ACT_IDX_HI_PROCVAR_PROC_INST ON ACT_HI_VARINST(PROC_INST_ID_);


-- Changeset liquibase/activiti-history-5.11.xml::11.2 Activiti 5.11 Create Index on ACT_HI_VARINST::trademakers::(Checksum: 3:073fe2780a7f3f19c1bf034800f9d3bc)
CREATE INDEX ACT_IDX_HI_PROCVAR_NAME_TYPE ON ACT_HI_VARINST(NAME_, VAR_TYPE_);


-- Changeset liquibase/activiti-history-5.12.xml::2 Activiti 5.12 Update ACT_HI_TASKINST::trademakers::(Checksum: 3:319900036855ef42da46e29d4d01c05f)
ALTER TABLE ACT_HI_TASKINST ADD CLAIM_TIME_ TIMESTAMP(6);


-- Changeset liquibase/activiti-history-5.12.xml::3 Activiti 5.12 Update ACT_HI_ACTINST assignee column size::fheremans::(Checksum: 3:7fce6782a51bfd36d2232adb3d386d14)
ALTER TABLE ACT_RU_TASK MODIFY OWNER_ NVARCHAR2(255);


-- Release Database Lock
-- Release Database Lock
